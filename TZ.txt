че мы делаем (че должен делать скрипт по крону)

1. Запускаемся
2. Получаем ExchangesList (из него можно взять: оф курс, и  процент обменника) +
3. получаем все вмиды +
3. получем заявки на бирже по направлению обмена + - берется автоматом из exchange
4. есть ли нужные заявки - удовлетворяющие условию
   1. цикле проходим по всем exchange
   1. получаем нужный нам курс из конкретного exchange.
   2. получаем первую заявку на бирже по данному напралению. 
   2. сравниваем наш курс с первой заявкой.
   
   3. если заявка подходит начинаем перебирать кошельки во всех вмидах.
   4. если кошелек нашли, покупаем заявку, если не нашли, начинаем побирать с нескольких кошельклов 
   5. сохраняем кошелек в базу
   6. 
   
   10. 3,4 - состояние
3. Идем по каждому направлению: 
3.2. Определяем в направлении сколько денег мне нужно обменять
3.3. Ищем по всем вмидам подходящий кошелек на котором есть нужная сумма на кошельке.
        чё делать если на кошельке не хватает денег - идем дальше. Если на всех кошельках не хватает денег - 
        - то с каждого берем сколько есть (цепочка обязанностей наверное поканает, если неудача пишем репорт на сколько удалось обменять денег) - 
        проверить чтоб на кошельке было больше допустимой мин суммы для обмена на эксченджере
   3.4. ставим заявку , пытаемся купить
   3.5. 


1-я страница. Остановить все обмены.


Вообщем, думаю будет три страницы : 
1.Страница курсов, 2.История, 3.Основные настройки.
Используемые валюты: R, Z, E, U, B, G 
WMZ - USD — средства эквивалентные долларам США
WMR - RUB — средства эквивалентные Российским рублям
WME - EUR — средства эквивалентные евро
WMU - UAH — средства эквивалентные гривнам Украины.
WMY — UZS - средства эквивалентные узбекским Сумам.
WMB - BYR — средства эквивалентные белорусским рублям.
WMG — средства эквивалентные золоту. 
Страница курсов следующего вида:
 
направление обмена|Курс ЦБ| мой % (+-)|полученный курс(прямой и обратный)|min сумма|max сумма|активность|
 
Страница истории 
Номер заявки|Сумма|Курс ЦБ|мой %|пол.курс(прямой и обратный)|дата и время обмена|удалить 
 
Страница настроек 
тут вы сами укажите основные настройки которые понадобятся. 
Что необходимо мне, чтобы была возможность включения и отключения самого скрипта полность 
одной кнопкой в настройках,
время обновления крона,изменение кошельков.
Вот в принципе основное, что необходимо. 
Надеюсь Вы как знающий человек системы обменов вебмани, сможете подсказать, 
что будет мне еще необходимо для реализации этого проекта, и будете корректировать мои идеи.

 
 
 Привет, забыл сказать по курсам ЦБ, необходимо, чтобы брались курсы следующего дня, они обычно появляются в 12 часов дня или чуть позже. 
 Т.е. необходимо, чтобы курс валют обновлялся с 11 до 17 часов каждые минут 5 и если есть 
 новый завтрашний курс, то ставится он, если нет то текущий сегодняшний.
 
 
 
 ЖЕСТЬ:
 Привет, валюты  Z,R,E,U,B,G соответственно направления все между ними. 
 Думаю лучше будет сделать выпадающее меню из этих валют и при выборе отображаться 
 будут направления соответствующие этой валюте, т.е выбрать Z и отображаться будут все 
 направления от Z->R, Z->U, Z->E  и пр., чтобы не получилась каша из всех направлений. 
 По принципу работы: скрипт сканирует например каждые 30 сек. все направления обмена, 
 затем в зависимости от числа моего процента от курса ЦБ(хоть "+", хоть "-" значение, берется только число), 
 будет производится порядок обмена. 
 Например направления Z->R = -2%, R->E=+4%, U->Z=-3%, 
 получается порядок обменов будет 1 R->E, 2 U->Z, 3 Z->R 
 т.е согласно цифр процентов 4, затем 3, затем 2. 
 Соответственно если какой-то валюты уже нет в наличии, то обмен идет дальше по порядку до конца цикла. 
 Максимальное и минимальное кол-во при обмене в каждом направлении указывается в настройках.

 
 
  